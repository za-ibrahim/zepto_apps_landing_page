---
import { Image } from "astro:assets";
import logo from "../../assets/logo.png";
import pplrImg from "../../assets/products/1.png";
import SignCustomizerImg from "../../assets/products/2.png";
import BoostlyCartImg from "../../assets/products/3.png";
import InfinSEOImg from "../../assets/products/4.png";
import popManImg from "../../assets/products/5.png";
---

<div class="loader">
  <div class="box">
    <div class="logo">
      <a href="/">
        <Image
          src={logo}
          alt="Logo"
          class="logo-image absolute inset-0 w-6 xl:w-7 h-auto mx-auto my-auto"
        />
      </a>
      <!-- <svg
        xmlns="http://www.w3.org/2000/svg"
        width="800"
        height="800"
        viewBox="0 0 128 128"
        aria-hidden="true"
        class="svg"
        ><path
          d="M108.91 99.71H62.6l48.33-79.77c.44-.73.46-1.64.04-2.39-.42-.74-1.21-1.2-2.06-1.2H81.06c-.25 0-.49.05-.71.13H19.09c-1.24 0-2.24 1-2.24 2.24v16.72c0 1.24 1.01 2.24 2.24 2.24h47.43l-49.44 79.75c-.45.73-.47 1.65-.06 2.4.42.75 1.21 1.21 2.07 1.21h29.25c.25 0 .49-.05.72-.12h59.84c1.23 0 2.24-1 2.24-2.24v-16.72c.01-1.25-1-2.25-2.23-2.25"
        ></path>
      </svg> -->
    </div>
  </div>
  <div class="box">
    <div class="upper-box">
      <a href="https://productpersonalizer.com/" target="_blank">
        <Image
          src={pplrImg}
          alt="Product 1"
          class="product absolute top-0 left-0 inset-[65%] rounded-sm w-5 h-auto"
        />
      </a>
    </div>
  </div>
  <div class="box">
    <div class="upper-box">
      <a href="https://landing-page-woad-tau.vercel.app/" target="_blank">
        <Image
          src={SignCustomizerImg}
          alt="Product 2"
          class="product absolute top-1/2 -translate-y-1/2 right-0 inset-[90%] rounded-sm w-5 h-auto"
        />
      </a>
    </div>
  </div>
  <div class="box">
    <div class="upper-box">
      <a
        href="https://apps.shopify.com/boostlycart-cart-drawer-upsell"
        target="_blank"
      >
        <Image
          src={BoostlyCartImg}
          alt="Product 3"
          class="product absolute bottom-0 left-1/2 -translate-x-1/2 inset-[93%] rounded-sm w-5 h-auto"
        />
      </a>
    </div>
  </div>
  <div class="box">
    <div class="upper-box">
      <a href="https://apps.shopify.com/infinseo" target="_blank">
        <Image
          src={InfinSEOImg}
          alt="Product 4"
          class="product absolute top-0 right-1/4 -translate-x-1/2 inset-[70%] rounded-sm w-5 h-auto"
        />
      </a>
    </div>
  </div>
  <div class="box">
    <div class="upper-box">
      <a href="https://apps.shopify.com/infinseo" target="_blank">
        <Image
          src={popManImg}
          alt="Product 5"
          class="product absolute bottom-1/5 left-1/12 -translate-x-1/2 inset-[72%] rounded-sm w-5 h-auto"
        />
      </a>
    </div>
  </div>
</div>

<script>
  const products = document.querySelectorAll(".product");
  const upperBoxes = document.querySelectorAll(".upper-box");

  products.forEach((product, index) => {
    const upperBox = upperBoxes[index];

    product.addEventListener("mouseenter", () => {
      upperBox.style.animationPlayState = "paused";
      product.style.animationPlayState = "paused";
    });

    product.addEventListener("mouseleave", () => {
      upperBox.style.animationPlayState = "running";
      product.style.animationPlayState = "running";
    });
  });
</script>

<style>
  .loader {
    --size: 210px;
    --duration: 3s;
    --logo-color: rgb(221, 213, 213);
    --background: linear-gradient(
      0deg,
      rgba(216, 216, 216, 0.2) 0%,
      rgba(183, 183, 183, 0.2) 100%
    );
    height: var(--size);
    aspect-ratio: 1;
    position: relative;
  }

  .loader .box {
    position: absolute;
    /* background: rgba(100, 100, 100, 0.15); */
    background: none;
    /* background: var(--background); */
    border-radius: 50%;
    /* border-top: 1px solid rgba(100, 100, 100, 1); */
    /* border-top: 1px solid rgba(100, 100, 100, 1); */
    /* box-shadow: rgba(0, 0, 0, 0.3) 0px 10px 10px -0px; */
    box-shadow: #b6babc 0px 5px 10px -0px;
    backdrop-filter: blur(5px);
    transform: scale(2);
    animation: ripple var(--duration) infinite ease-in-out;
  }

  .loader .box .upper-box {
    /* border: 1px solid rgba(0, 0, 255, 0.068); */
    width: 100%;
    height: 100%;
    border-radius: 50%;
  }

  .loader .box:nth-child(2) .upper-box {
    animation: rotateBox 40s infinite linear;
  }
  .loader .box:nth-child(3) .upper-box {
    animation: rotateBox 40s infinite linear;
  }
  .loader .box:nth-child(4) .upper-box {
    animation: rotateBox 40s infinite linear;
  }
  .loader .box:nth-child(5) .upper-box {
    animation: rotateBox 40s infinite linear;
  }
  .loader .box:nth-child(6) .upper-box {
    animation: rotateBox 39s infinite linear;
  }

  .loader .box:nth-child(2) .upper-box .product,
  .loader .box:nth-child(3) .upper-box .product,
  .loader .box:nth-child(4) .upper-box .product,
  .loader .box:nth-child(5) .upper-box .product {
    animation: stable-rotate 40s infinite linear;
  }
  .loader .box:nth-child(6) .upper-box .product {
    animation: stable-rotate 39s infinite linear;
  }
  /* .loader .box:nth-child(3) .upper-box .product,
  .loader .box:nth-child(5) .upper-box .product {
    animation: stable-rotate 20s infinite linear;
  } */

  .loader .box:nth-child(1) {
    inset: 40%;
    z-index: 99;
  }

  .loader .box:nth-child(2) {
    inset: 30%;
    z-index: 98;
    border-color: rgba(100, 100, 100, 0.8);
    animation-delay: 0.2s;
  }

  .loader .box:nth-child(3) {
    inset: 20%;
    z-index: 97;
    border-color: rgba(100, 100, 100, 0.6);
    animation-delay: 0.4s;
  }

  .loader .box:nth-child(4) {
    inset: 10%;
    z-index: 96;
    border-color: rgba(100, 100, 100, 0.4);
    animation-delay: 0.6s;
  }

  .loader .box:nth-child(5) {
    inset: 0%;
    z-index: 95;
    border-color: rgba(100, 100, 100, 0.2);
    animation-delay: 0.8s;
  }
  .loader .box:nth-child(6) {
    inset: -10%;
    z-index: 94;
    border-color: rgba(100, 100, 100, 0.2);
    animation-delay: 1s;
  }

  .loader .logo {
    position: absolute;
    inset: 0;
    display: grid;
    place-content: center;
    padding: 30%;
  }

  .loader .logo svg {
    fill: var(--logo-color);
    width: 100%;
    fill: white;
    animation: color-change var(--duration) infinite ease-in-out;
  }

  @keyframes ripple {
    0% {
      transform: scale(2);
      /* box-shadow: rgba(0, 0, 0, 0.3) 0px 10px 10px -0px; */
    }
    50% {
      transform: scale(1.9);
      /* box-shadow: rgba(0, 0, 0, 0.3) 0px 30px 20px -0px; */
    }
    100% {
      transform: scale(2);
      /* box-shadow: rgba(0, 0, 0, 0.3) 0px 10px 10px -0px; */
    }
  }

  @keyframes rotateBox {
    0% {
      transform: rotate(0deg);
    }
    100% {
      transform: rotate(360deg);
    }
  }
  @keyframes stable-rotate {
    0% {
      transform: rotate(0deg);
    }
    100% {
      transform: rotate(-360deg);
    }
  }

  @keyframes color-change {
    0% {
      fill: var(--logo-color);
    }
    50% {
      fill: white;
    }
    100% {
      fill: var(--logo-color);
    }
  }

  @media screen and (max-width: 1200px) {
    .loader {
      --size: 180px;
      height: var(--size);
    }
    .product {
      width: 1.15rem;
      height: auto;
    }
  }
</style>
